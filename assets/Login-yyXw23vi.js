import{r as l,u as C,a as L,j as e,L as D,s as I,b as M,d as k,e as F,f as U,h as z}from"./index-H1kLPFNU.js";import{I as g}from"./Input-C0M9PrMI.js";import{F as A,a as R,P as V}from"./index-CZCwtDRv.js";import"./index-Dmyz76UT.js";function G(){const[t,n]=l.useState({userEmail:"",userPassword:""}),[i,h]=l.useState(!1),[x,m]=l.useState(null),[u,c]=l.useState(!1),[f,r]=l.useState(""),[w,a]=l.useState(!1),b=C(),d=L(z),v=()=>{a(!1)},y=o=>{n({...t,userEmail:o})},E=o=>{n({...t,userPassword:o})},j=()=>{h(o=>!o)},S=async o=>{o.preventDefault();const p=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.userEmail);if(m(p),navigator.onLine){if(p){console.log("login..."),c(!0);try{const s=await I(d,t.userEmail,t.userPassword),P=s.user,N=M(k,"users",P.uid);(await F(N)).exists()?(console.log("login succefully"+s.user),b("/dashboard")):(await U(d),a(!0),r("هذا البريد قيد التأكيد"))}catch(s){console.log(s.code),s.code==="auth/user-not-found"?(a(!0),r("عذراً هذا المتسخدم غير موجود")):s.code==="auth/wrong-password"?(a(!0),r("كلمة  السر التي أدخلتها غير صحيحة")):s.code==="auth/invalid-credential"?(a(!0),r("البريد الإلكتروني غير صحيح أو كلمة المرور غير صحيحة")):s.code==="auth/network-request-failed"&&(a(!0),r("فشل الإتصال بالشبكة، حاول مجدداً"))}finally{c(!1)}}}else a(!0),r("الرجاء الإتصال بالإنترنت أولاً")};return e.jsxs("div",{className:"login px-5 py-10 rounded flex flex-col gap-5 items-center bg-bg2-color w-[min(98%,450px)]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mb-5 text-title-color",children:"تسجيل دخول"}),e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-5 w-full ",children:[e.jsx(g,{id:"email",label:"البريد الإكتروني",type:"email",value:t.userEmail,onChange:y,error:x,errorMsg:"الرجاء كتابة بريد الكتروني صالح",customStyle:"text-center"}),e.jsx(g,{id:"passowrd",type:i?"text":"password",value:t.userPassword,label:"كلمة المرور",onChange:E,errorMsg:"كلمة المرور التي أدخلتها غير صالحة",customStyle:"text-center",children:e.jsx("div",{className:"absolute left-2 top-2 cursor-pointer",onClick:j,children:i?e.jsx(A,{size:25}):e.jsx(R,{size:25})})}),e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsx("button",{type:"submit",disabled:u,className:`bg-bg-color text-white hover:text-bg2-color hover:bg-p-color/80 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold ${u&&"opacity-50"}`,children:"تسجيل دخول"}),e.jsx(D,{to:"/signup",children:e.jsx("button",{className:"bg-white text-gray-800 hover:text-white hover:bg-gray-950 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold",children:"تسجيل جديد"})})]})]}),w&&e.jsx(V,{closePopupError:v,msg:f})]})}export{G as default};
