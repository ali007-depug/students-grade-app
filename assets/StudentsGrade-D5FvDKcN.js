import{r as a,j as e,q as h,c as b,d as g,w as j,g as S}from"./index-B62z-FAd.js";import{I as N}from"./Input-BxHdZr2F.js";function y({onSearch:t}){const[s,r]=a.useState(""),[o,c]=a.useState(null),l=n=>{r(n)},d=n=>{n.preventDefault();const i=/^\d+$/.test(s);c(i),s.trim()&&i&&t(s)};return e.jsx(e.Fragment,{children:e.jsxs("form",{className:"flex gap-1 flex-col",onSubmit:n=>d(n),children:[e.jsx(N,{type:"text",value:s,label:"رقم التسجيل - student ID",onChange:l,error:o,errorMsg:"الرجاء كتابة رقم تسجيل صالح",customStyle:"![direction:ltr] text-center self-center"}),e.jsx("button",{type:"submit",className:"cursor-pointer rounded bg-p-color font-bold text-white w-fit self-center px-5 py-3 my-4 hover:text-bg2-color-color hover:bg-s-color transition-all duration-300 ease-linear",children:"إستعلام"})]})})}function w({result:t,error:s,loading:r}){return e.jsx("div",{className:"bg-bg-color text-white flex flex-col  justify-center shadow-md p-4 rounded",children:s?e.jsx("p",{className:"text-red-500 text-center text-xl",children:s}):r?e.jsxs("div",{className:"flex items-center gap-3 mx-auto",children:[e.jsx("span",{className:"block size-5 border-2 border-bg2-color border-b-transparent rounded-full animate-spin  "}),e.jsx("p",{className:" text-green-600 font-bold text-xl",children:"جاري البحث..."})]}):e.jsxs("div",{className:"std__info flex flex-col gap-4 mx-auto w-fit",children:[e.jsxs("div",{className:"std__name flex font-bold",children:[e.jsx("p",{className:"pl-1",children:" الاسم :"}),e.jsx("p",{children:t==null?void 0:t.stdName})]}),e.jsxs("div",{className:"std__grade flex font-bold",children:[e.jsx("p",{className:"pl-1",children:"الدرجة :"}),e.jsx("p",{children:t==null?void 0:t.stdGrade})]})]})})}function _(){const[t,s]=a.useState(null),[r,o]=a.useState(!1),[c,l]=a.useState(""),[d,n]=a.useState(!1),[i,u]=a.useTransition(),m=a.useCallback(p=>{u(async()=>{o(!0),l(""),s(null),n(!0);try{const f=h(b(g,"grades"),j("std_id","==",p.trim())),x=await S(f);x.empty?l("لم يتم العثور على الطالب"):s(x.docs[0].data())}catch{l("حدث خطأ أثناء البحث")}finally{o(!1)}})},[]);return e.jsxs("div",{className:"bg-bg2-color shadow-2xl p-5 rounded w-[min(95%,550px)]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mt-3 mb-10 text-title-color",children:"نتائج الطلاب"}),e.jsx(y,{onSearch:m}),d&&e.jsx(w,{result:t,error:c,loading:r})]})}export{_ as default};
