import{r as o,u as A,a as I,i as M,j as e,L as $,h as g,k as D,l as z,b as q}from"./index-BYz9ZtPJ.js";import{I as n}from"./Input-Do_04ajW.js";import{F as O,a as R,P as T}from"./index-DY2vxrgq.js";import"./index-Caijxhw0.js";function H(){const[d,f]=o.useState(!1),[s,i]=o.useState({fName:"",lName:"",email:"",password:""}),[c,w]=o.useState({emailValid:null,passwordValid:null}),[u,p]=o.useState(!1),[b,t]=o.useState(!1),[j,r]=o.useState(""),v=s.fName+" "+s.lName,N=A(),m=I(g),y=M(g),S=()=>{f(a=>!a)},E=()=>{t(!1)},C=a=>{i({...s,fName:a})},P=a=>{i({...s,lName:a})},V=a=>{i({...s,email:a})},F=a=>{i({...s,password:a})},k=async a=>{a.preventDefault();const h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email),x=/[!@#$%^&*(),.?":{}|<>]/.test(s.password);if(w({emailValid:h,passwordValid:x}),navigator.onLine){if(h&&x){p(!0);try{const L=(await D(m,s.email,s.password)).user;await z(q(y,"pending-users",L.uid),{name:v,email:s.email,createdAt:new Date}),await m.signOut(),console.log("why the popup not working"),t(!0),r("تم استلام البيانات، سيتم تنشيط الحساب لاحقاً"),setTimeout(()=>{N("/login")},3e3)}catch(l){console.log(`signup error : ${l.message}`),l.code==="auth/email-already-in-use"?(t(!0),r("هذا البريد تم التسجيل به من قبل")):l.code==="auth/invalid-email"?(t(!0),r("هذا البريد غير صالح")):l.code==="auth/network-request-failed"&&(t(!0),r("فشل الإتصال بالشبكة"))}finally{p(!1)}}}else t(!0),r("عذراً لا يوجد اتصال بالانترنت")};return e.jsxs("div",{className:"signup px-5 pt-10 pb-5 rounded flex flex-col gap-5 items-center bg-bg2-color w-[min(98%,550px)]",children:[e.jsx("h1",{className:"text-center font-extrabold text-3xl mb-5 text-title-color",children:"أدمن جديد"}),e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(n,{type:"text",value:s.fName,onChange:C,label:"الاسم الأول"}),e.jsx(n,{type:"text",value:s.lName,onChange:P,label:"الاسم الثاني"})]}),e.jsx(n,{id:"email",label:"البريد الإكتروني",type:"email",value:s.email,onChange:V,error:c.emailValid,errorMsg:"الرجاء كتابة بريد الكتروني صالح"}),e.jsxs(n,{id:"passowrd",type:d?"text":"password",value:s.password,label:"كلمة المرور",onChange:F,error:c.passwordValid,errorMsg:" كلمة المرور التي أدخلتها غير صالحة",children:[e.jsx("div",{className:"absolute left-2 top-3 cursor-pointer",onClick:S,children:d?e.jsx(O,{size:20}):e.jsx(R,{size:20})}),e.jsxs("div",{className:"text-sm text-gray-900 self-start",children:[e.jsx("p",{children:"*يجب أن تكون  كلمة السر أكثر من 12 حرف"}),e.jsx("p",{children:"*يجب أن تحتوي كلمة السر على :"}),e.jsx("ul",{children:e.jsx("li",{children:"رموز خاصة مثل @-#-!-?"})})]})]}),e.jsx("button",{type:"submit",disabled:u,className:`bg-bg-color text-white hover:text-bg2-color hover:bg-p-color/80 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer font-semibold ${u&&"opacity-50"}`,children:"تسجيل"})]}),e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx("p",{children:"هل لديك حساب مسبقاً ؟"}),e.jsx($,{to:"/login",children:e.jsx("button",{className:"bg-gray-400 text-black hover:text-white hover:bg-gray-950 transition-all duration-300 ease-out px-5 py-2 rounded cursor-pointer",children:"تسجيل دخول"})})]}),b&&e.jsx(T,{closePopupError:E,msg:j})]})}export{H as default};
